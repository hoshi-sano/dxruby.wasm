<!DOCTYPE html>
<html>
  <head>
    <meta charset= "utf-8" />
    <title>DXRuby.wasm Example</title>
    <script type="module" src="./dist/load_ruby_script.js"></script>
    <script type="text/ruby" data-eval="async">
      require "dxruby_wasm"

      version = DXRubyWasm::VERSION
      JS.global[:document].getElementById("dxruby-out")[:innerText] = "DXRubyWasm ver.#{version}"

      rect = Image.new(30, 30, C_GREEN)
      logo = Image.load("logo.png")

      rect_x, rect_y = 0, 0
      logo_y = 0
      speed = 2

      Window.loop do
        rect_x += Input.x * speed
        rect_y += Input.y * speed
        logo_y += speed
        logo_y = 0 if logo_y > Window.height

        Window.draw(rect_x, rect_y, rect)
        Window.draw(0, logo_y, logo)
      end
    </script>
  </head>

  <body>
    <div id="dxruby-out"></div>
    <canvas id="dxruby-canvas"></canvas>
  </body>
</html>
